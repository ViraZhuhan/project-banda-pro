{"mappings":"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","sources":["src/index.js","src/js/modal-empty.js","src/js/upcoming.js","src/js/loader.js"],"sourcesContent":["import './js/header';\nimport './js/mobile-menu';\nimport './js/themeToggle';\nimport './js/hero';\nimport './js/modal-empty';\nimport './js/modal_movie';\nimport './js/upcoming';\nimport './js/loader';\nimport './js/create-trends';\nimport './js/modal-team';\nimport './js/scroll-up'\n","import getRefs from './components/get-refs';\n\nconst refs = getRefs();\n\nconst modal = document.querySelector('.modal-empty__backdrop');\nconst close = document.querySelector('.modal-empty__close');\nmodal.addEventListener('click', onModalEmpty);\nclose.addEventListener('click', onCloseModalEmpty);\n\nsetTimeout(async () => {\n  await new Promise(r => setTimeout(r, 1000));\n  const btn = window.document.querySelector('#trailer');\n  btn.addEventListener('click', onOpenModalEmpty);\n  console.log(), 200;\n});\n\nexport function onOpenModalEmpty() {\n  toggleModalEmpty();\n  window.document.addEventListener('keydown', onTapEsc);\n}\n\nfunction onModalEmpty(e) {\n  if (e.target === e.currentTarget) {\n    toggleModalEmpty();\n    window.document.removeEventListener('keydown', onTapEsc);\n  }\n}\n\nfunction onCloseModalEmpty() {\n  toggleModalEmpty();\n  window.document.removeEventListener('keydown', onTapEsc);\n}\n\nfunction onTapEsc(e) {\n  if (e.key === 'Escape') {\n    toggleModalEmpty();\n  }\n}\n\nfunction toggleModalEmpty() {\n  if (modal.classList.contains('modal-empty__backdrop--close')) {\n    modal.classList.remove('modal-empty__backdrop--close');\n  } else {\n    modal.classList.add('modal-empty__backdrop--close');\n  }\n}\n","import Api from './api';\nconst refs = {\n  galleryOfNewMovies: document.querySelector('.upcoming__container'),\n};\nconst newMovies = new Api();\n\nfetchUpcomingMovie()\n  .then(renderUpcomingMovieCard)\n  .catch(er => console.log(er.message));\nrenderUpcomingMovieCard();\nexport function fetchUpcomingMovie() {\n  return newMovies.upcoming();\n}\n\nexport async function renderUpcomingMovieCard(res) {\n    try {\n      const genres = await newMovies.fetchGenres();\n\n  const min = 0;\n  const max = 19;\n  const UpcomingMovieRandom = Math.floor(Math.random() * (max - min + 1)) + min;\n      const resultsRandom = [res.results[UpcomingMovieRandom]];\n      const data = res.results[UpcomingMovieRandom];\n  \n      const createUpcomingCard = resultsRandom.map(result => {\n        const {\n          backdrop_path,\n          original_title,\n          release_date,\n          vote_average,\n          vote_count,\n          popularity,\n          genre_ids,\n          overview,\n        } = result;\n        function getFormatDate(join) {\n          join = join || ' '; // разделитель по дефолту\n  \n          const release = new Date(release_date);\n          return (\n            release.getDate() +\n            join +\n            release.getMonth() +\n            join +\n            release.getFullYear()\n          );\n        }\n  \n        const idGenre = data.genre_ids;\n  \n        let nameGenres = [];\n        for (let i = 0; i < idGenre.length; i += 1) {\n          const item = genres.find(el => el.id === idGenre[i]);\n          nameGenres.push(item.name);\n        }\n  \n   const title = data.original_title;\n   const imageUrl = data.backdrop_path\n   ? `https://image.tmdb.org/t/p/w500/${data.backdrop_path}`\n   : 'https://via.placeholder.com/395x574?text=No+Image'; \n   const formatDate = getFormatDate('.');\n   const voteAverage = data.vote_average;\n   const voteCount = data.vote_count;\n   const movieId = JSON.stringify(data.id);\n   const genreUp = nameGenres.slice(0, 2).join(', ');\n  \n  refs.galleryOfNewMovies.innerHTML = ` <h2 class=\"upcoming__title\">Upcoming this month</h2>\n  <div class=\"upcoming__info\"> \n  <img src=\"https://image.tmdb.org/t/p/original/${imageUrl}\" alt=\"${title}\"  loading=\"lazy\" class=\"upcoming__img\" />\n  <div class=\"upcoming__info-btn\">\n  <div class=\"upcoming__info-layout\">\n  <h3 class =\"upcoming__movie-title\"><span class=\"upcoming__item-font-title\">${title}</span></h3>\n  <div class=\"upcoming__list-tablet\">\n  <ul class=\"upcoming__list\">\n  <li class =\"upcoming__item\"><span class=\"upcoming__item-font-date\">Release date</span><span class=\"upcoming__item-data\">${formatDate}</span></li>\n  <li class =\"upcoming__item\"><span class=\"upcoming__item-font-vote\">Vote/Votes </span><span class=\"upcoming__item-vote\">${voteAverage}</span>  /  <span class=\"upcoming__item-votes\">${voteCount}</span></li>\n  </ul>\n  <ul class=\"upcoming__list\">\n  <li class =\"upcoming__item\"><span class=\"upcoming__item-font-popularity\">Popularity </span><span class=\"upcoming__item-pop\">${popularity}</span></li>\n  <li class =\"upcoming__item\"><span class=\"upcoming__item-font-genre\">Genre </span><span class=\"upcoming__item-genre\">${genreUp}</span></li>\n  </ul>\n  </div>\n  <p class =\"upcoming__movie-about\">About</p>\n  <p class=\"upcoming__item-font-about\">${overview}</p>\n  </div>\n  <button type=\"button\" class=\"upcoming__button\">Remind me</button>\n  </div>\n  </div>`;\n  \n  const remindBtn = document.querySelector('button.upcoming__button');\n  const KEY = 'LibraryMovie';\n  \n   const movieItem = {\n    release_date: formatDate,\n    id: movieId,\n    title: title,\n    popularity,\n    vote_average: voteAverage,\n    poster_path: data.poster_path,\n    vote_count:voteCount,\n    genre_ids: idGenre,\n    overview,\n  };\n  remindBtn.addEventListener('click', onClick);\n  function onClick() {\n      try {\n        let objects = null\n         ? undefined\n         : JSON.parse(localStorage.getItem(KEY)) || [];\n       objects.push(movieItem);\n       localStorage.setItem(KEY, JSON.stringify(objects));\n       \n       return remindBtn.disabled = true;\n      } catch (error) {\n        console.error(error);\n      }\n    }\n  \n  function savedMovie() {\n      try {\n        const itemLs = localStorage.getItem(KEY);\n        const parceLS = null ? undefined : JSON.parse(itemLs);\n        if (parceLS === null) {\n          return;\n        }\n        parceLS.map(elm => {\n          if (elm.id === movieItem.id) {\n            return remindBtn.disabled = true;\n          }\n        });\n    \n          } catch (error) {\n            console.error(error);\n          }\n        }\n         \n        savedMovie();\n      });\n    } catch{error => (console.log(error.message))};\n    };\n\n\n ","const body = document.querySelector('body');\nconst loader = document.createElement('div');\nconst spinner = document.createElement('div');\nloader.classList.add('isHidden');\nspinner.classList.add('spinner');\nloader.appendChild(spinner);\nbody.appendChild(loader);\n\nexport function startSpinner() {\n  loader.className = 'loader';\n}\nexport function stopSpinner() {\n  loader.className = 'isHidden';\n}\n"],"names":["parcelRequire","$bpxeT","$cc901904b2728d11$var$modal","default","document","querySelector","$cc901904b2728d11$var$close","$cc901904b2728d11$export$4f1aef646faefebf","$cc901904b2728d11$var$toggleModalEmpty","window","addEventListener","$cc901904b2728d11$var$onTapEsc","e","key","classList","contains","remove","add","target","currentTarget","removeEventListener","setTimeout","$parcel$interopDefault","$2TvXO","mark","_callee","Promise","r","console","log","$4c6aab06649ec8ef$var$refs","galleryOfNewMovies","$4c6aab06649ec8ef$var$newMovies","$b7ONl","$4c6aab06649ec8ef$export$b31ccb6f873ec7de","res","$4c6aab06649ec8ef$var$_renderUpcomingMovieCard","apply","this","arguments","genres","UpcomingMovieRandom","resultsRandom","data","fetchGenres","_ctx","sent","Math","floor","random","results","map","result","item","find","el","id","idGenre","i","nameGenres","push","name","release_date","backdrop_path","original_title","popularity","vote_average","vote_count","overview","genre_ids","i1","length","_loop","title","imageUrl","concat","formatDate","join","release","Date","getDate","getMonth","getFullYear","getFormatDate","voteAverage","voteCount","movieId","JSON","stringify","genreUp","slice","innerHTML","remindBtn","KEY","movieItem","poster_path","objects","parse","localStorage","getItem","setItem","disabled","error","itemLs","parceLS","elm","savedMovie","upcoming","then","catch","er","message","$03da642c15b09e5e$var$body","$03da642c15b09e5e$var$loader","createElement","$03da642c15b09e5e$var$spinner","appendChild"],"version":3,"file":"index.b5a45dcf.js.map"}